{"version":3,"sources":["meteor://ðŸ’»app/client/templates/template.about.js","meteor://ðŸ’»app/client/templates/template.editPost.js","meteor://ðŸ’»app/client/templates/template.home.js","meteor://ðŸ’»app/client/templates/template.layout.js","meteor://ðŸ’»app/client/templates/template.post.js","meteor://ðŸ’»app/client/templates/template.postInList.js","meteor://ðŸ’»app/client/templates/home.js","meteor://ðŸ’»app/client/template.index.js","meteor://ðŸ’»app/client/template-helpers.js","meteor://ðŸ’»app/collections.js","meteor://ðŸ’»app/routes.js","meteor://ðŸ’»app/main.js"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yH;;;;;;;;;;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;;ACzBA,SAAS,IAAT,CAAc,OAAd,CAAsB;;;AAGlB;AAAW,yBAAU;AACjB,aAAO,MAAM,IAAN,CAAW,EAAX,EAAe,EAAC,MAAM,EAAC,aAAa,CAAC,CAAf,EAAP,EAAf,CAAP;AACH;;AAFD;AAAA;AAHkB,CAAtB;;;AAUA,SAAS,IAAT,CAAc,MAAd,CAAqB;AACpB;AAAyB,iCAAS,CAAT,EAAY,QAAZ,EAAqB;AAC7C,UAAI,eAAe,QAAQ,GAAR,CAAY,eAAZ,CAAnB;;AAEA,cAAQ,GAAR,CAAY,eAAZ,EAA6B,eAAe,CAA5C;AACA;;AAJD;AAAA;AADoB,CAArB,yH;;;;;;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA,yH;;;;;;;;;;;ACNA,SAAS,cAAT,CAAwB,YAAxB,EAAsC,UAAS,IAAT,EAAe,IAAf,EAAoB;AACzD,SAAO,IAAP;AACC,OAAK,SAAL;AACE,UAAO,OAAO,IAAP,CAAY,IAAZ,EAAkB,OAAlB,EAAP;AACF,OAAK,KAAL;AACC,UAAO,OAAO,IAAP,CAAY,IAAZ,EAAkB,WAAlB,EAAP;AACD;AACC,UAAO,OAAO,IAAP,CAAY,IAAZ,EAAkB,MAAlB,CAAyB,MAAzB,CAAP;AANF;AAQA,CATD,yH;;;;;;;;;;;;ACCA,QAAQ,IAAI,MAAM,UAAV,CAAqB,OAArB,CAAR,oF;;;;;;;;;;;ACDA,IAAG,OAAO,QAAV,EAAoB;AAChB,YAAQ,UAAR,CAAmB,eAAnB,EAAoC,CAApC;AACH;;AAGD,OAAO,SAAP,CAAiB;AACb,oBAAgB,QADH;AAEb,sBAAkB,UAFL;AAGb,qBAAiB,SAHJ;;;AAMb;AAAe,iCAAW;AACtB,gBAAI,OAAO,MAAM,OAAN,CAAc,EAAC,MAAM,KAAK,MAAL,CAAY,IAAnB,EAAd,CAAX;;AAEA,gBAAG,EAAE,QAAF,CAAW,IAAX,KAAoB,CAAC,EAAE,OAAF,CAAU,IAAV,CAAxB,EACI,SAAS,KAAT,GAAiB,sBAAqB,KAAK,KAA3C,CADJ,KAGI,SAAS,KAAT,GAAiB,sBAAqB,KAAK,KAAL,CAAW,OAAX,EAAtC;AACP;;AAPD;AAAA;AANa,CAAjB;;AAiBA,iBAAiB,gBAAgB,MAAhB,CAAuB;AACpC;AAAQ,0BAAW;AACf,mBAAO,OAAO,SAAP,CAAiB,aAAjB,EAAgC,KAAK,MAAL,CAAY,IAA5C,CAAP;AACH;;AAFD;AAAA,OADoC;;AAKpC;AAAM,wBAAW;AACb,mBAAO,MAAM,OAAN,CAAc,EAAC,MAAM,KAAK,MAAL,CAAY,IAAnB,EAAd,CAAP;AACH;;AAFD;AAAA;AALoC,CAAvB,CAAjB;;AAUA,OAAO,GAAP,CAAW,YAAW;;;AAGlB,SAAK,KAAL,CAAW,MAAX,EAAmB;AACf,cAAM,GADS;AAEf,kBAAU,MAFK;;;AAKf;AAAe,qCAAU;AACrB,uBAAO,OAAO,SAAP,CAAiB,gBAAjB,EAAmC,QAAQ,GAAR,CAAY,eAAZ,CAAnC,CAAP;AACH;;AAFD;AAAA;AALe,KAAnB;;;AAYA,SAAK,KAAL,CAAW,OAAX,EAAoB;AAChB,cAAM,QADU;AAEhB,kBAAU;AAFM,KAApB;;;AAOA,SAAK,KAAL,CAAW,MAAX,EAAmB;AACf,cAAM,cADS;AAEf,kBAAU,MAFK;AAGf,oBAAY;AAHG,KAAnB;;;AASA,SAAK,KAAL,CAAW,WAAX,EAAwB;AACpB,cAAM,kBADc;AAEpB,kBAAU,UAFU;AAGpB,oBAAY;AAHQ,KAAxB;;;AAOA,SAAK,KAAL,CAAW,aAAX,EAA0B;AACtB,cAAM,cADgB;AAEtB,kBAAU;AAFY,KAA1B;AAKH,CA3CD;;;AA+CA,IAAI,gBAAgB,SAAhB,aAAgB,GAAU;AAC1B,QAAI,CAAC,OAAO,IAAP,EAAD,IAAkB,CAAC,OAAO,IAAP,GAAc,KAAjC,IAA0C,CAAC,OAAO,IAAP,GAAc,KAAd,CAAoB,KAAnE,EAA0E;AACtE,aAAK,MAAL,CAAY,UAAZ;AAEH,KAHD,MAGO;AACH,aAAK,IAAL;AACH;AACJ,CAPD;;AAUA,OAAO,cAAP,CAAsB,aAAtB,EAAqC,EAAC,MAAM,CAAC,aAAD,EAAe,WAAf,CAAP,EAArC,+C;;;;;;;;;;;;ACxFA,SAAS,MAAT,CAAgB;AACZ,+BAA6B;AADjB,CAAhB;;;AAKA,IAAG,OAAO,QAAV,EAAoB;AACnB,SAAO,SAAP,CAAiB,WAAjB;AACA,yH","file":"/app.js","sourcesContent":["\nTemplate.__checkName(\"about\");\nTemplate[\"about\"] = new Template(\"Template.about\", (function() {\n  var view = this;\n  return Spacebars.include(view.lookupTemplate(\"markdown\"), function() {\n    return \"\\n## About me\\n\\nLorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod\\ntempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,\\nquis nostrud **exercitation ullamco** laboris nisi ut aliquip ex ea commodo\\nconsequat.\\n\\nLink to my facebook: [facebook.com][1]\\n\\n[1]: http://facebook.com\\n\";\n  });\n}));\n","\nTemplate.__checkName(\"editPost\");\nTemplate[\"editPost\"] = new Template(\"Template.editPost\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"editPost\"\n  }, \"\\n\t\t\", HTML.FORM(\"\\n\t\t\t\", HTML.LABEL(\"\\n\t\t\t\tTitle\\n\t\t\t\t\", HTML.INPUT({\n    type: \"text\",\n    name: \"title\",\n    placeholder: \"Awesome title\",\n    value: function() {\n      return Spacebars.mustache(view.lookup(\"title\"));\n    }\n  }), \"\\n\t\t\t\"), \"\\n\t\t\t\\n\t\t\t\", HTML.LABEL(\"\\n\t\t\t\tDescription\\n\t\t\t\t\", HTML.TEXTAREA({\n    name: \"description\",\n    placeholder: \"Short description displayed in posts list\",\n    rows: \"3\",\n    value: function() {\n      return Spacebars.mustache(view.lookup(\"description\"));\n    }\n  }), \"\\n\t\t\t\"), \"\\n\\n\t\t\t\", HTML.LABEL(\"\\n\t\t\t\tContent\\n\t\t\t\t\", HTML.TEXTAREA({\n    name: \"text\",\n    rows: \"10\",\n    placeholder: \"Brilliant content\",\n    value: function() {\n      return Spacebars.mustache(view.lookup(\"text\"));\n    }\n  }), \"\\n\t\t\t\"), \"\\n\\n\t\t\t\", HTML.Raw('<button type=\"submit\" class=\"save\">Save Post</button>'), \"\\n\t\t\"), \"\\n\t\");\n}));\n","\nTemplate.__checkName(\"home\");\nTemplate[\"home\"] = new Template(\"Template.home\", (function() {\n  var view = this;\n  return [ Spacebars.include(view.lookupTemplate(\"markdown\"), function() {\n    return \"\\n## Welcome to my Blog\\nHere I'm talking about my latest discoveries from the world of JavaScript.\\n\t\";\n  }), HTML.Raw(\"\\n\\n\\n\t<!-- #Users and Permissions -> Adding admin functionality to the templates -->\\n\t\"), Blaze.If(function() {\n    return Spacebars.call(Spacebars.dot(view.lookup(\"currentUser\"), \"roles\", \"admin\"));\n  }, function() {\n    return [ \"\\n\t\t\", HTML.A({\n      href: \"/create-post\",\n      \"class\": \"createNewPost\"\n    }, \"Create new post\"), \"\\n\t\" ];\n  }), HTML.Raw(\"\\n\\n\t<!-- Listing posts -->\\n\t\"), Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"postsList\"));\n  }, function() {\n    return [ \"\\n\t\t\", Spacebars.include(view.lookupTemplate(\"postInList\")), \"\\n\t\" ];\n  }), HTML.Raw('\\n\\n\t<!-- #Controlling the data flow -> Lazy load posts or how to change subscriptions -->\\n\t<button class=\"lazyload\">Load more</button>') ];\n}));\n","\nTemplate.__checkName(\"layout\");\nTemplate[\"layout\"] = new Template(\"Template.layout\", (function() {\n  var view = this;\n  return [ HTML.HEADER(\"\\n\t\t\", HTML.DIV({\n    \"class\": \"container\"\n  }, \"\\n\t\t\t\", HTML.Raw(\"<h1>My Meteor Single Page App</h1>\"), \"\\n\t\t\t\", HTML.Raw('<ul>\\n\t\t\t\t<li>\\n\t\t\t\t\t<a href=\"/\">Home</a>\\n\t\t\t\t</li>\\n\t\t\t\t<li>\\n\t\t\t\t\t<a href=\"/about\">About</a>\\n\t\t\t\t</li>\\n\t\t\t</ul>'), \"\\n\\n\t\t\t\", HTML.Raw(\"<!-- #Users and permissions -> Adding admin functionality to the template -->\"), \"\\n\t\t\t\", Spacebars.include(view.lookupTemplate(\"loginButtons\")), \"\\n\t\t\"), \"\\n\t\"), \"\\n\\n\t\", HTML.DIV({\n    \"class\": \"container\"\n  }, \"\\n\t\t\", HTML.MAIN(\"\\n\t\t\t\", Spacebars.include(view.lookupTemplate(\"yield\")), \"\\n\t\t\"), \"\\n\t\") ];\n}));\n\nTemplate.__checkName(\"notFound\");\nTemplate[\"notFound\"] = new Template(\"Template.notFound\", (function() {\n  var view = this;\n  return HTML.Raw('<div class=\"center\">\\n\t\t<h1>Nothing here</h1><br>\\n\t\t<h2>You hit a page which doesn\\'t exist!</h2>\\n\t</div>');\n}));\n\nTemplate.__checkName(\"loading\");\nTemplate[\"loading\"] = new Template(\"Template.loading\", (function() {\n  var view = this;\n  return HTML.Raw('<div class=\"center\">\\n\t\t<h1>Loading</h1>\\n\t</div>');\n}));\n","\nTemplate.__checkName(\"post\");\nTemplate[\"post\"] = new Template(\"Template.post\", (function() {\n  var view = this;\n  return [ HTML.H1(Blaze.View(\"lookup:title\", function() {\n    return Spacebars.mustache(view.lookup(\"title\"));\n  })), \"\\n\t\", HTML.H2(Blaze.View(\"lookup:description\", function() {\n    return Spacebars.mustache(view.lookup(\"description\"));\n  })), \"\\n\\n\t\", HTML.SMALL(\"\\n\t\tPosted \", Blaze.View(\"lookup:formatTime\", function() {\n    return Spacebars.mustache(view.lookup(\"formatTime\"), view.lookup(\"timeCreated\"), \"fromNow\");\n  }), \" by \", Blaze.View(\"lookup:author\", function() {\n    return Spacebars.mustache(view.lookup(\"author\"));\n  }), \"\\n\t\\n\t\t\", HTML.Raw(\"<!-- #Users and Permissions -> Adding admin functionality to the templates -->\"), \"\\n\t\t\", Blaze.If(function() {\n    return Spacebars.call(Spacebars.dot(view.lookup(\"currentUser\"), \"roles\", \"admin\"));\n  }, function() {\n    return [ \"\\n\t\t\t| \", HTML.A({\n      href: function() {\n        return [ \"/edit-post/\", Spacebars.mustache(view.lookup(\"slug\")) ];\n      }\n    }, \"Edit post\"), \"\\n\t\t\" ];\n  }), \"\\n\t\"), \"\\n\t\\n\t\", HTML.DIV({\n    \"class\": \"postContent\"\n  }, \"\\n\t\t\", Spacebars.include(view.lookupTemplate(\"markdown\"), function() {\n    return [ \"\\n\", Blaze.View(\"lookup:text\", function() {\n      return Spacebars.mustache(view.lookup(\"text\"));\n    }), \"\\n\t\t\" ];\n  }), \"\t\\n\t\") ];\n}));\n","\nTemplate.__checkName(\"postInList\");\nTemplate[\"postInList\"] = new Template(\"Template.postInList\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"postListItem\"\n  }, \"\\n\t\t\", HTML.H2(HTML.A({\n    href: function() {\n      return [ \"posts/\", Spacebars.mustache(view.lookup(\"slug\")) ];\n    }\n  }, Blaze.View(\"lookup:title\", function() {\n    return Spacebars.mustache(view.lookup(\"title\"));\n  }))), \"\\n\t\t\", HTML.P(Blaze.View(\"lookup:description\", function() {\n    return Spacebars.mustache(view.lookup(\"description\"));\n  })), \"\\n\t\t\", HTML.DIV({\n    \"class\": \"footer\"\n  }, \"\\n\t\t\t\", HTML.TIME({\n    datetime: function() {\n      return Spacebars.mustache(view.lookup(\"formatTime\"), view.lookup(\"timeCreated\"), \"iso\");\n    }\n  }, \"Posted \", Blaze.View(\"lookup:formatTime\", function() {\n    return Spacebars.mustache(view.lookup(\"formatTime\"), view.lookup(\"timeCreated\"), \"fromNow\");\n  }), \" by \", Blaze.View(\"lookup:author\", function() {\n    return Spacebars.mustache(view.lookup(\"author\"));\n  })), \"\\n\t\t\"), \"\\n\t\");\n}));\n","// Template helpers\nTemplate.home.helpers({\n\n    // #Storing Data -> Querying a collection\n    postsList: function(){\n        return Posts.find({}, {sort: {timeCreated: -1}});\n    }\n});\n\n\n// #Controlling the data flow -> Lazy load posts or how to change subscriptions\nTemplate.home.events({\n\t'click button.lazyload': function(e, template){\n\t\tvar currentLimit = Session.get('lazyloadLimit');\n\n\t\tSession.set('lazyloadLimit', currentLimit + 2);\n\t}\n});","\nTemplate.body.addContent((function() {\n  var view = this;\n  return \"\";\n}));\nMeteor.startup(Template.body.renderToDocument);\n","Template.registerHelper('formatTime', function(time, type){\n\tswitch(type){\n\t\tcase 'fromNow': \n\t \t\treturn moment.unix(time).fromNow();\n\t\tcase 'iso':\n\t\t\treturn moment.unix(time).toISOString();\n\t\tdefault:\n\t\t\treturn moment.unix(time).format('LLLL');\n\t}\n});","// #Storing Data -> Setup a collection\nPosts = new Mongo.Collection('posts');","if(Meteor.isClient) {\n    Session.setDefault('lazyloadLimit', 2);\n}\n\n\nRouter.configure({\n    layoutTemplate: 'layout',\n    notFoundTemplate: 'notFound',\n    loadingTemplate: 'loading',\n\n    // #Routes -> Changing the website title\n    onAfterAction: function() {\n        var data = Posts.findOne({slug: this.params.slug});\n\n        if(_.isObject(data) && !_.isArray(data))\n            document.title = 'My Meteor Blog - '+ data.title;\n        else\n            document.title = 'My Meteor Blog - '+ this.route.getName();\n    }\n});\n\n\nPostController = RouteController.extend({\n    waitOn: function() {\n        return Meteor.subscribe('single-post', this.params.slug);\n    },\n\n    data: function() {\n        return Posts.findOne({slug: this.params.slug});\n    }\n});\n\nRouter.map(function() {\n    \n    // #Routes -> Setup the router\n    this.route('Home', {\n        path: '/',\n        template: 'home',\n\n        // #Routes -> Moving the posts subscription to the \"Home\" route\n        subscriptions: function(){\n            return Meteor.subscribe(\"lazyload-posts\", Session.get('lazyloadLimit'));\n        }\n    });\n\n\n    // #Routes -> Adding another routne\n    this.route('About', {\n        path: '/about',\n        template: 'about'\n    });\n\n\n    // #Routes -> Setting up the post route\n    this.route('Post', {\n        path: '/posts/:slug',\n        template: 'post',\n        controller: 'PostController'\n    });\n\n\n\n    // #Users and permissions -> Creating routes routs for the admin\n    this.route('Edit Post', {\n        path: '/edit-post/:slug',\n        template: 'editPost',\n        controller: 'PostController' \n    });\n\n    // #Users and permissions -> Creating routes routs for the admin\n    this.route('Create Post', {\n        path: '/create-post',\n        template: 'editPost'\n    });\n\n});\n\n\n// #Users and permissions -> Creating routes for the admin\nvar requiresLogin = function(){\n    if (!Meteor.user() || !Meteor.user().roles || !Meteor.user().roles.admin) {\n        this.render('notFound');\n\n    } else {\n        this.next();\n    }\n};\n\n\nRouter.onBeforeAction(requiresLogin, {only: ['Create Post','Edit Post']});","// #Users and permissions -> Adding the accounts packages\nAccounts.config({\n    forbidClientAccountCreation: true\n});\n\n// # Users and Permissions -> Adding permissions\nif(Meteor.isClient) {\n\tMeteor.subscribe(\"userRoles\");\n}"]}