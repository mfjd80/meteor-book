{"version":3,"sources":["meteor://ðŸ’»app/server/publications.js","meteor://ðŸ’»app/server/main.js","meteor://ðŸ’»app/collections.js","meteor://ðŸ’»app/routes.js","meteor://ðŸ’»app/main.js"],"names":[],"mappings":"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","file":"/app.js","sourcesContent":["// #Controlling the data flow -> Lazy load posts or how to change subscriptions\nMeteor.publish('lazyload-posts', function (limit) {\n\treturn Posts.find({}, {\n\t\tlimit: limit,\n\t\tfields: {\n\t\t\ttext: 0\n\t\t},\n\t\tsort: {timeCreated: -1}\n\t});\n});\n\n// #Routes -> Setting up the post route\nMeteor.publish(\"single-post\", function (slug) {\n\treturn Posts.find({slug: slug});\n});\n\n// # Users and Permissions -> Adding permissions\nMeteor.publish(\"userRoles\", function () {\nif (this.userId) {\n\treturn Meteor.users.find({_id: this.userId}, {fields: {roles: 1}});\n} else {\n\tthis.ready();\n} });","Meteor.startup(function(){\n\n\tconsole.log('Server started');\n\n\n\t// #Users and Permissions -> -> Creating the admin user\n\tif(Meteor.users.find().count() === 0) {\n\n\t\tconsole.log('Created Admin user');\n\n\t\tvar userId = Accounts.createUser({\n\t\t\tusername: 'johndoe',\n\t\t\temail: 'johndoe@example.com',\n\t\t\tpassword: '1234',\n\t\t\tprofile: {\n\t\t\t\tname: 'John Doe'\n\t\t\t}\n\t\t});\n\t\tMeteor.users.update(userId, {$set: {\n\t\t\troles: {admin: true},\n\t\t}})\n\t}\n\n\n\t// #Storing Data -> Adding example posts\n\tif(Posts.find().count() === 0) {\n\n\t\tconsole.log('Adding dummy posts');\n\n\t\tvar dummyPosts = [\n\t\t\t{\n\t\t\t\ttitle: 'My First entry',\n\t\t\t\tslug: 'my-first-entry',\n\t\t\t\tdescription: 'Lorem ipsum dolor sit amet.',\n\t\t\t\ttext: 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.',\n\t\t\t\ttimeCreated: moment().subtract(7, 'days').unix(),\n\t\t\t\tauthor: 'John Doe'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'My Second entry',\n\t\t\t\tslug: 'my-second-entry',\n\t\t\t\tdescription: 'Borem ipsum dolor sit amet, consetetur sadipscing.',\n\t\t\t\ttext: 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.',\n\t\t\t\ttimeCreated: moment().subtract(5, 'days').unix(),\n\t\t\t\tauthor: 'John Doe'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'My Third entry',\n\t\t\t\tslug: 'my-third-entry',\n\t\t\t\tdescription: 'Dorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor.',\n\t\t\t\ttext: 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.',\n\t\t\t\ttimeCreated: moment().subtract(3, 'days').unix(),\n\t\t\t\tauthor: 'John Doe'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'My Fourth entry',\n\t\t\t\tslug: 'my-fourth-entry',\n\t\t\t\tdescription: 'Sorem ipsum dolor sit amet, consetetur sadipscing.',\n\t\t\t\ttext: 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.',\n\t\t\t\ttimeCreated: moment().subtract(2, 'days').unix(),\n\t\t\t\tauthor: 'John Doe'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'My Fifth entry',\n\t\t\t\tslug: 'my-fifth-entry',\n\t\t\t\tdescription: 'Korem ipsum dolor sit amet, consetetur sadipscing elitr.',\n\t\t\t\ttext: 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.',\n\t\t\t\ttimeCreated: moment().subtract(1, 'days').unix(),\n\t\t\t\tauthor: 'John Doe'\n\t\t\t}\n\t\t];\n\n\t\t// we add the dummyPosts to our database\n\t\t_.each(dummyPosts, function(post){\n\t\t\tPosts.insert(post);\n\t\t});\n\t}\n});","// #Storing Data -> Setup a collection\nPosts = new Mongo.Collection('posts');","if(Meteor.isClient) {\n    Session.setDefault('lazyloadLimit', 2);\n}\n\n\nRouter.configure({\n    layoutTemplate: 'layout',\n    notFoundTemplate: 'notFound',\n    loadingTemplate: 'loading',\n\n    // #Routes -> Changing the website title\n    onAfterAction: function() {\n        var data = Posts.findOne({slug: this.params.slug});\n\n        if(_.isObject(data) && !_.isArray(data))\n            document.title = 'My Meteor Blog - '+ data.title;\n        else\n            document.title = 'My Meteor Blog - '+ this.route.getName();\n    }\n});\n\n\nPostController = RouteController.extend({\n    waitOn: function() {\n        return Meteor.subscribe('single-post', this.params.slug);\n    },\n\n    data: function() {\n        return Posts.findOne({slug: this.params.slug});\n    }\n});\n\nRouter.map(function() {\n    \n    // #Routes -> Setup the router\n    this.route('Home', {\n        path: '/',\n        template: 'home',\n\n        // #Routes -> Moving the posts subscription to the \"Home\" route\n        subscriptions: function(){\n            return Meteor.subscribe(\"lazyload-posts\", Session.get('lazyloadLimit'));\n        }\n    });\n\n\n    // #Routes -> Adding another routne\n    this.route('About', {\n        path: '/about',\n        template: 'about'\n    });\n\n\n    // #Routes -> Setting up the post route\n    this.route('Post', {\n        path: '/posts/:slug',\n        template: 'post',\n        controller: 'PostController'\n    });\n\n\n\n    // #Users and permissions -> Creating routes routs for the admin\n    this.route('Edit Post', {\n        path: '/edit-post/:slug',\n        template: 'editPost',\n        controller: 'PostController' \n    });\n\n    // #Users and permissions -> Creating routes routs for the admin\n    this.route('Create Post', {\n        path: '/create-post',\n        template: 'editPost'\n    });\n\n});\n\n\n// #Users and permissions -> Creating routes for the admin\nvar requiresLogin = function(){\n    if (!Meteor.user() || !Meteor.user().roles || !Meteor.user().roles.admin) {\n        this.render('notFound');\n\n    } else {\n        this.next();\n    }\n};\n\n\nRouter.onBeforeAction(requiresLogin, {only: ['Create Post','Edit Post']});","// #Users and permissions -> Adding the accounts packages\nAccounts.config({\n    forbidClientAccountCreation: true\n});\n\n// # Users and Permissions -> Adding permissions\nif(Meteor.isClient) {\n\tMeteor.subscribe(\"userRoles\");\n}"]}